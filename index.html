<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday.</title>

<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  height:100vh;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Patrick Hand', cursive;
  overflow:hidden;
  touch-action: manipulation;
}

/* BOOK */
.book{
  width: min(90vw, 380px);
  height: min(90vh, 520px);
  aspect-ratio: 380 / 520;
  perspective:2000px;
  position:relative;
}

/* PAGE */
.page{
  position:absolute;
  inset:0;
  background:black;
  color:white;
  padding:45px 40px;
  border:1px solid rgba(255,255,255,0.15);
  transform-origin:left;
  transition:transform 1s cubic-bezier(.4,0,.2,1), filter .6s ease;
  backface-visibility:hidden;
  box-shadow:0 20px 40px rgba(0,0,0,.8);
}

.page::before{
  content:"";
  position:absolute;
  left:0; top:0;
  width:18px; height:100%;
  background:linear-gradient(to right,rgba(255,255,255,.15),transparent);
  opacity:.4;
}

.page.flipped{
  transform:rotateY(-180deg);
  filter:brightness(.92);
  pointer-events:none;
}

/* COVER */
.cover{
  display:flex;
  flex-direction:column;
  justify-content:center;
  text-align:center;
  background:#050505;
}

.cover button{
  margin-top:30px;
  background:white;
  color:black;
  border:none;
  padding:10px 26px;
  font-family:'Patrick Hand', cursive;
  font-size:16px;
  cursor:pointer;
}

/* TEXT */
h2{margin-bottom:18px;}
p{font-size:18px; line-height:1.8; white-space:pre-line;}

/* CONTROLS */
.controls{
  position:absolute;
  bottom:16px;
  left:50%;
  transform:translateX(-50%);
  width:calc(100% - 40px);
  display:flex;
  justify-content:space-between;
  z-index:9999;
}

@media (max-width: 480px){
  h1{ font-size: 26px; }
  h2{ font-size: 20px; }
  p{ font-size: 17px; }
  .nav{ font-size: 16px; }
}

.nav{
  background:none;
  border:1px solid white;
  color:white;
  padding:8px 16px;
  font-size:15px;
  cursor:pointer;
  min-width:48px;
}

.nav.hidden{
  opacity:0;
  pointer-events:none;
}

/* HOLD + SECRET */
.hold{
  position:absolute;
  bottom:70px;
  left:32px;
  font-size:15px;
  opacity:.6;
  user-select:none;
}

.secret{
  opacity:0;
  transition:opacity 1.5s ease;
  margin-top:30px;
}
.secret.show{opacity:1}

/* FADE */
.fade{
  opacity:0;
  animation:fadeIn 2s forwards;
}
@keyframes fadeIn{to{opacity:1}}

audio{display:none;}
</style>
</head>

<body>

<div class="book">

  <!-- COVER -->
  <div class="page cover">
    <h1>To: Ghina</h1>
    <p>Ga tau ah, buka aja sendiri.</p>
    <button id="openBtn">Open</button>
  </div>

  <!-- PAGE 1 -->
  <div class="page">
    <h2>Ghina Jelek</h2>
    <p>
Pokoknya yang namanya Ghina itu jelek. 

Jelek kayak bebek.
    </p>
  </div>

  <!-- PAGE 2 -->
  <div class="page">
    <h2>Apa?</h2>
    <p>
Cari apa disini? 

Ga ada apa-apa, gausah dicari. 
    </p>
  </div>

  <!-- PAGE 3 -->
  <div class="page">
    <h2>ðŸ˜’</h2>
    <p>
Ghina jelek.
    </p>
  </div>

  <!-- PAGE 4 -->
  <div class="page">
    <h2>ðŸ¤¨</h2>
    <p>
Dih gajelas.
    </p>
  </div>

  <!-- PAGE 5 -->
  <div class="page">
    <h2>Masih lanjut?</h2>
    <p>
Cari apaan si? 

Udah dibilang gada apa-apa, dih. 
    </p>
  </div>

  <!-- PAGE 6 -->
  <div class="page">
    <h2>Seriously?</h2>
    <p>
Still here?? 
    </p>
  </div>

  <!-- PAGE 7 -->
  <div class="page">
    <h2>Hadeehh</h2>
    <p>
Dibilangin ga ada apa-apa disiniiii... 
      
Yaudah deh. 
    </p>
  </div>

  <!-- PAGE 8 -->
  <div class="page">
    <h2>Nih baca baik baik.</h2>
    <p>
Kasian liatnya, 
Udah terlanjur baca sampe sini. 
    </p>
  </div>

  <!-- PAGE 9 -->
  <div class="page">
    <h2 class="fade">...</h2>
    <p class="fade">
Sabaarrrrr

Dikit lagi nih
    </p>
  </div>

  <!-- PAGE 10 (LAST PAGE) -->
  <div class="page">
    <h2 class="fade">Buat Ghina jelek</h2>

    <p class="fade">
HBD aja. 
Dah, itu doang. 
    </p>

    <div class="hold" id="hold">(hold here)</div>

    <p class="secret" id="secret">
Masih mau marah ke Ghina jelek.
Mager ngechat Ghina jelek, mager juga buat story ig.

Kalo sempro jangan lupa ngabarin.
Itu aja deh, bye. 
    </p>
  </div>

  <!-- CONTROLS -->
  <div class="controls">
    <button class="nav hidden" id="prevBtn">â—€</button>
    <button class="nav hidden" id="nextBtn">â–¶</button>
  </div>

</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<audio id="rustle">
  <source src="rustle.mp3" type="audio/mpeg">
</audio>

<script>
const pages = document.querySelectorAll('.page');
const music = document.getElementById('music');
const rustle = document.getElementById('rustle');
const openBtn = document.getElementById('openBtn');
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const hold = document.getElementById('hold');
const secret = document.getElementById('secret');

let current = 0;

/* STACK */
pages.forEach((p,i)=>p.style.zIndex = pages.length - i);

/* OPEN */
openBtn.onclick = async ()=>{
  try{
    music.volume = .6;
    await music.play();
  }catch(e){}
  flipNext();
  checkControls();
};

/* SOUND */
function playRustle(){
  rustle.currentTime = 0;
  rustle.volume = .5;
  rustle.play().catch(()=>{});
}

/* FLIP */
function flipNext(){
  if(current < pages.length - 1){
    playRustle();
    pages[current].classList.add('flipped');
    current++;
    checkControls();
  }
}

function flipPrev(){
  if(current > 0){
    playRustle();
    current--;
    pages[current].classList.remove('flipped');
    checkControls();
  }
}

nextBtn.onclick = flipNext;
prevBtn.onclick = flipPrev;

/* CONTROLS */
function checkControls(){
  prevBtn.classList.toggle('hidden', current === 0);
  nextBtn.classList.toggle('hidden', current === 0 || current === pages.length - 1);
}

/* LONG PRESS */
let pressTimer;
['mousedown','touchstart'].forEach(e=>{
  hold.addEventListener(e,()=>{
    pressTimer = setTimeout(()=>secret.classList.add('show'),600);
  });
});
['mouseup','mouseleave','touchend'].forEach(e=>{
  hold.addEventListener(e,()=>clearTimeout(pressTimer));
});

checkControls();
</script>

</body>
</html>

